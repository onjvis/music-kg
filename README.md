# Music KG

✨ **This workspace has been generated by [Nx, Smart Monorepos · Fast CI.](https://nx.dev)** ✨

## Requirements

- Node.js version 20

## Set up

Run the following commands:

```bash
npm install -g pnpm@8
pnpm install
```

### Environment files

Applications need the environment files to work properly.

The API reads the environment variables from this path: `/apps/api/.env`.
The Dashboard reads the environment variables from this path: `/apps/dashboard/.env.local`.

You need to either create your own environment files or you can use existing environment files.

## Start applications

### In terminal

Run `npx nx run api:serve` to start the API development server. The API listens at port 8000.

Run `npx nx run dashboard:serve --host 0.0.0.0` to start the React FE development server. The GUI is available at port 4200.

### Using docker

```bash
docker build --file=apps/dashboard/Dockerfile  -t music-kg-dashboard .
docker build --file=apps/api/Dockerfile  -t music-kg-api .
docker compose -f docker-compose.yaml up
```

### RDF store

1. Use `./tools/download-fuseki.sh` to download Apache Jena Fuseki
2. Navigate to `tools/fuseki` folder
3. Run `./fuseki-server` to start a Fuseki server
4. Open http://localhost:3030 to access Fuseki GUI
5. Create a new dataset called `music-kg` and choose `Persistent (TDB2)` as `Dataset type`

#### SHACL endpoint
(If you do not need to have SHACL validation service, you can skip this step)

To enable SHACL validation service, open `tools/fuseki/run/configuration/music-kg.ttl` and add the following triple to the configuration file: 
```
:service_tdb_all fuseki:endpoint  [ fuseki:name "shacl";
                                    fuseki:operation fuseki:shacl
                                  ] . 
```

For more information refer to [Fuseki Documentation](https://jena.apache.org/documentation/shacl/).

SHACL shapes for the project are available in `tools/shacl.ttl`.

## Format code

Run `npx nx format:write --all` for running the prettier over the codebase.
